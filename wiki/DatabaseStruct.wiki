#summary Описание структуры базы данных.
#labels Featured,Database,SQL

= Описание структуры базы данных. =

== Структура ==
База имеет следующую структуру:

[http://cloudobserver.googlegroups.com/web/DatabaseStruct.jpg]

== Таблицы ==
Используются таблицы:
 * *Users* - содержит данные о зарегистрированных пользователях.
 * *Groups* - содержит данные о зарегистрированных группах.
 * *Cameras* - содержит данные о зарегистрированных камерах.
 * *Frames* - содержит данные о сохраненных кадрах.
 * *_GroupMembers* - описывает принадлежности пользователей к группам.
 * *_GroupCameras* - описывает принадлежности камер к группам.

== Поля таблиц ==

=== Users ===
 * *UserID (int)* - идентификатор пользователя, ключевое поле.
 * *Email (string)* - электронный адрес пользователя.
 * *Password (string)* - пароль пользователя.
 * *Name (string)* - отображаемое имя пользователя.
 * *Description (html)* - описание пользователя в виде html-страницы.
 * *Icon (bitmap)* - иконка (аватар) пользователя.
 * *RegistrationDate (datetime)* - дата и время регистрации пользователя.

=== Groups ===
 * *GroupID (int)* - идентификатор группы, ключевое поле.
 * *Name (string)* - имя группы.
 * *Description (html)* - описание группы в виде html-страницы.
 * *Icon (bitmap)* - иконка группы.
 * *Privacy (bool)* - настройки доступа:
    * _true_ - открытая группа, доступна для поиска по группам и свободна для вступления
    * _false_ - закрытая группа, недоступна из поиска по группам, добавить участника может только пользователь группы с соответствующими правами
 * *RegistrationDate (datetime)* - дата и время регистрации группы.

=== Cameras ===
 * *CameraID (int)* - идентификатор камеры, ключевое поле.
 * *Path (string)* - сетевой путь для получения данных с камеры.
 * *Name (string)* - имя камеры.
 * *Description (html)* - описание камеры в виде html-страницы.
 * *Icon (bitmap)* - иконка камера (используется когда онлайн трансляция с камеры недоступна).
 * *RegistrationDate (datetime)* - дата и время регистрации камеры.

=== Frames ===
 * *FrameID (int)* - идентификатор кадра, ключевое поле.
 * *CameraID (int)* - идентификатор камеры, с которой был получен кадр.
 * *Content (bitmap)* - кадр.
 * *Marker (xml)* - маркер кадра с информацией о времени съемки и обнаруженных событиях.

=== GroupMembers ===
 * *LinkID (int)* - ключевое поле.
 * *UserID (int)* - идентификатор пользователя.
 * *GroupID (int)* - идентификатор группы.
 * *Privileges (int)* - права пользователя в группе (поле рассматривается по битам).

=== GroupCameras ===
 * *LinkID (int)* - ключевое поле. 
 * *CameraID (int)* - идентификатор камеры.
 * *GroupID (int)* - идентификатор группы.